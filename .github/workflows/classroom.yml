name: Autograding Tests
'on':
- push
- repository_dispatch
permissions:
  checks: write
  actions: read
  contents: read
jobs:
  run-autograding-tests:
    runs-on: ubuntu-latest
    if: github.actor != 'github-classroom[bot]'
    steps:
    - name: Checkout code
      uses: actions/checkout@v4
    - name: Q1. Count Vowels in a String
      id: q1-count-vowels-in-a-string
      uses: classroom-resources/autograding-command-grader@v1
      with:
        test-name: Q1. Count Vowels in a String
        setup-command: pip install pytest
        command: pytest test_question1.py
        timeout: 10
        max-score: 10
    - name: Q2. Find Second Highest Number
      id: q2-find-second-highest-number
      uses: classroom-resources/autograding-command-grader@v1
      with:
        test-name: Q2. Find Second Highest Number
        setup-command: pip install pytest
        command: pytest test_question2.py
        timeout: 10
        max-score: 10
    - name: Q3. JSON Data Pipeline with Functional Programming
      id: q3-json-data-pipeline-with-functional-programming
      uses: classroom-resources/autograding-command-grader@v1
      with:
        test-name: Q3. JSON Data Pipeline with Functional Programming
        setup-command: pip install pytest
        command: pytest test_question3.py
        timeout: 10
        max-score: 20
    - name: Autograding Reporter
      uses: classroom-resources/autograding-grading-reporter@v1
      env:
        Q1-COUNT-VOWELS-IN-A-STRING_RESULTS: "${{steps.q1-count-vowels-in-a-string.outputs.result}}"
        Q2-FIND-SECOND-HIGHEST-NUMBER_RESULTS: "${{steps.q2-find-second-highest-number.outputs.result}}"
        Q3-JSON-DATA-PIPELINE-WITH-FUNCTIONAL-PROGRAMMING_RESULTS: "${{steps.q3-json-data-pipeline-with-functional-programming.outputs.result}}"
      with:
        runners: q1-count-vowels-in-a-string,q2-find-second-highest-number,q3-json-data-pipeline-with-functional-programming
